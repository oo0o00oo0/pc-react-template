<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SuperSplat Viewer</title>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <base href="" />
    <link rel="stylesheet" href="./index.css" />
    <script type="importmap">
      {
        "imports": {
          "playcanvas": "https://cdn.jsdelivr.net/npm/playcanvas@2.5.2/build/playcanvas.mjs",
          "spline": "./spline.js"
        }
      }
    </script>
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@playcanvas/web-components@0.1.13/dist/pwc.mjs"
    ></script>
    <script type="module">
      window.settings = fetch("./settings.json").then((response) =>
        response.json()
      );
    </script>
  </head>

  <body>
    <pc-app
      depth="true"
      antialias="false"
      high-resolution="true"
      stencil="false"
    >
      <pc-asset src="./camera/camera-controls.mjs"></pc-asset>

      <pc-asset
        id="ply"
        type="gsplat"
        lazy
        src="./trained-1.5k-23s-1sh.compressed.ply"
      ></pc-asset>
      <pc-scene>
        <pc-entity name="camera root">
          <pc-entity name="camera">
            <pc-camera
              near-clip="0.01"
              far-clip="1000"
              horizontal-fov="true"
              tonemap="none"
            ></pc-camera>
            <pc-scripts>
              <pc-script name="cameraControls"></pc-script>
            </pc-scripts>
          </pc-entity>
        </pc-entity>
        <!-- Light (for XR controllers) -->
        <pc-entity name="barbican" position="-7 1 2" scale="2 2 2" solid>
          <pc-render type="box"></pc-render>
        </pc-entity>

        <pc-entity name="barbican" position="0 1 2" scale="2 2 2" blend>
          <pc-render type="box"></pc-render>
        </pc-entity>

        <pc-entity
          position="5 0 0"
          rotation="30 0 0"
          scale="1 1 1"
          name="light"
        >
          <pc-light type="directional" color="white" intensity="1"></pc-light>
        </pc-entity>

        <!-- Splat -->
        <pc-entity name="splat" rotation="0 0 180">
          <pc-splat asset="ply"></pc-splat>
        </pc-entity>
      </pc-scene>
    </pc-app>

    <script type="module" src="./index.js"></script>
  </body>
</html>
